<div>
  <!-- Ultra-ghetto 1990s-style table formatting for now -->
  <table width="100%">
    <tr>
      <td width="300px" style="vertical-align:top">
        <filter-sidebar></filter-sidebar>
      </td>

      <td style="vertical-align:top">
        <h1>Results ({{ numMatchingStudies }} studies, {{ numMatchingSamples }} samples)</h1>
        <ul>
          <li *ngFor='let studyMatch of matches'>
            <a (click)="selectStudy(studyMatch.study)" href="javascript:void(0)">
              {{studyMatch.study.id}}. <b>{{ studyMatch.study._source['STUDY']['Study Title'] }}</b>
            </a>
            <i>by {{ studyMatch.study._source['STUDY']['Study Researchers Involved'] }}</i>
            <br/>
            <b>{{ studyMatch.sampleMatches.length }} matching samples</b>
            <button (click)="areSamplesHidden[studyMatch.studyId] = !areSamplesHidden[studyMatch.studyId]">Show/Hide</button>
            <ul *ngIf="!areSamplesHidden[studyMatch.studyId]">
              <li *ngFor="let sampleMatch of sortSampleMatches(studyMatch.sampleMatches)">
                <div class="showonhover">
                  <a (click)="selectSample(sampleMatch.sample)" href="javascript:void(0)">
                    <b>{{ sampleMatch.sample._source['Sample Name'] }}</b>
                  </a>
                  <br/>
                  <span *ngFor="let key of distinctKeys(studyMatch.studyId, sampleMatch.sample)">
                    - <i>{{ key }}</i>: {{ sampleMatch.sample._source[key] }}
                  </span>


                  <div class="hovertext">
                    <div *ngFor="let propName of sampleKeys">

                      <div *ngIf="sampleMatch.sample._source[propName] && propName !== '_assay'">
                        <b>{{ propName }}</b>: {{ sampleMatch.sample._source[propName] }}
                      </div>

                      <div *ngIf="sampleMatch.sample._source[propName] && propName === '_assay'">
                        <b>Assay Properties</b>: <pre>{{ sampleMatch.sample._source[propName] | json }}</pre>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
  </table>
</div>
